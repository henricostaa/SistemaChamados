<UserControl x:Class="SistemaChamados.Views.ChatBotView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:SistemaChamados.ViewModels"
             xmlns:local="clr-namespace:SistemaChamados.Views"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="772"
             Style="{StaticResource Page_Style}">

    <UserControl.DataContext>
        <vm:ChatBotVM />
    </UserControl.DataContext>

    <UserControl.Resources>
        <!-- Sombra para os elementos -->
        <DropShadowEffect x:Key="DropShadow"
                          ShadowDepth="3"
                          BlurRadius="8"
                          Color="#88000000"/>
    </UserControl.Resources>
    <!-- Estrutura principal da página -->
    <Grid Margin="15">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="*"/>
            <!-- Chat area -->
            <RowDefinition Height="Auto"/>
            <!-- Input area -->
        </Grid.RowDefinitions>

        <!-- ===== Cabeçalho ===== -->
        <Border Grid.Row="0"
                Background="#6A0DAD"
                CornerRadius="10"
                Padding="12"
                Margin="0 0 0 10"
                Effect="{DynamicResource DropShadow}">
            <TextBlock Text="🤖 Inteligência Artificial InovaTech"
                       FontSize="20"
                       FontWeight="Bold"
                       Foreground="White"
                       TextAlignment="Center"
                       HorizontalAlignment="Center"/>
        </Border>

        <!-- ===== Área de mensagens ===== -->
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      Background="Transparent"
                      Padding="10"
                      BorderBrush="#6A0DAD"
                      BorderThickness="1"
                      >
            <ItemsControl ItemsSource="{Binding ChatMessages}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0 8">
                            <Border CornerRadius="15"
                        Padding="10 8"
                        HorizontalAlignment="{Binding Alignment}"
                        MaxWidth="300">

                                <!-- Fundo com gradiente -->
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="{Binding GradientStart}" Offset="0"/>
                                        <GradientStop Color="{Binding GradientEnd}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>

                                <TextBlock Text="{Binding Text}"
                               TextWrapping="Wrap"
                               Foreground="{Binding Foreground}"
                               FontSize="14"/>
                            </Border>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- ===== Área de entrada ===== -->
        <Border Grid.Row="2"
                CornerRadius="10"
                Background="#6A0DAD"
                Padding="10"
                Margin="0 10 0 0"
                BorderBrush="White"
                BorderThickness="1"
                Width="650">
            <DockPanel>
                <Border CornerRadius="6" BorderBrush="#CE93D8" BorderThickness="1" Background="#F3E5F5">
                    <TextBox Text="{Binding MensagemUsuario, UpdateSourceTrigger=PropertyChanged}" 
             
                        Height="35"                 
                        FontSize="14"                  
                        Padding="8"                 
                        Background="Transparent"                 
                        BorderThickness="0"                 
                        Foreground="#4A148C"                                 
                        CaretBrush="#4A148C" Margin="0,1,0,1" Width="500"/>
                </Border>
                <Button x:Name="SendButton"
                        Width="100"
                        Style="{StaticResource ModernLoginButton}"
                        Content ="Enviar"
                        Command="{Binding EnviarMensagemCommand}"
                        Cursor="Hand"
                        IsDefault="True" DockPanel.Dock="Right"/>
            </DockPanel>
        </Border>

    </Grid>
</UserControl>
